# Aliyun Image Pusher

### åŸºäº GitHub Actions çš„é•œåƒåŒæ­¥å·¥å…· (Fork ä¼˜åŒ–ç‰ˆ)

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªè½»é‡çº§çš„é•œåƒä¸­è½¬å·¥å…·ï¼Œæ—¨åœ¨å°† Docker Hub çš„é•œåƒè‡ªåŠ¨åŒæ­¥è‡³é˜¿é‡Œäº‘ç§æœ‰ä»“åº“ï¼ˆACRï¼‰ï¼Œè§£å†³å›½å†…ç¯å¢ƒæ‹‰å–é•œåƒæ…¢çš„é—®é¢˜ã€‚

## âœ¨ æœ¬æ¬¡ Fork å¼•å…¥çš„ä¼˜åŒ– (Key Enhancements)

å¯¹æ¯”åŸç‰ˆé€»è¾‘ï¼Œæœ¬é¡¹ç›®è¿›è¡Œäº†ä»¥ä¸‹æ ¸å¿ƒæ”¹è¿›ï¼š

1. **ç»„ç»‡åéš”ç¦»æœºåˆ¶ (Namespace Isolation)**ï¼š
* **æ”¹è¿›**ï¼šå¼•å…¥ç»„ç»‡åå‰ç¼€åŒ–é€»è¾‘ã€‚æ‰€æœ‰é•œåƒè‡ªåŠ¨æ˜ å°„ä¸º `ç»„ç»‡å_é•œåƒå:æ ‡ç­¾`ï¼ˆå¦‚ `apache_doris:latest`ï¼‰ï¼Œç¡®ä¿ä¸åŒæ¥æºçš„åŒåé•œåƒäº’ä¸å†²çªã€‚


2. **å®˜æ–¹é•œåƒæ ‡å‡†åŒ–**ï¼š
* è‡ªåŠ¨è¯†åˆ« Docker å®˜æ–¹é•œåƒï¼Œç»Ÿä¸€å½’ç±»åˆ° `library_` å‰ç¼€ä¸‹ï¼Œä½¿é•œåƒåˆ—è¡¨è§„æ•´ç»Ÿä¸€ã€‚


3. **æ™ºèƒ½å¢é‡åŒæ­¥**ï¼š
* é›†æˆ `skopeo` æ¢æµ‹åŠŸèƒ½ã€‚**å·²å­˜åœ¨çš„é•œåƒè‡ªåŠ¨è·³è¿‡**ï¼Œæå¤§èŠ‚çœæ„å»ºæ—¶é—´ï¼Œé¿å…é‡å¤æ¨é€ã€‚


4. **è¶…å¤§é•œåƒæ”¯æŒ**ï¼š
* è‡ªåŠ¨é‡Šæ”¾æ„å»ºç¯å¢ƒç£ç›˜ç©ºé—´ã€‚æ”¯æŒæ•° GB çº§åˆ«çš„é‡å‹é•œåƒï¼ˆå¦‚ Doris, Oracleï¼‰å¹³ç¨³åŒæ­¥ã€‚


5. **å¤§å‚çº§è¿ç»´å‘Šè­¦ (New ğŸš€)**ï¼š
* **é›†æˆé£ä¹¦ Webhook**ï¼šåŒæ­¥å®Œæˆåè‡ªåŠ¨å‘é€å¯Œæ–‡æœ¬é€šçŸ¥ã€‚
* **æç®€è§†è§‰è®¾è®¡**ï¼šé‡‡ç”¨å¯Œæ–‡æœ¬å¡ç‰‡æ’ç‰ˆï¼Œæ”¯æŒæˆåŠŸ/å¤±è´¥çŠ¶æ€åŒºåˆ†ã€æ–°å¢é•œåƒæ¸…å•å±•ç¤ºï¼Œä»¥åŠ**ä¸­æ–‡è¶…é“¾æ¥**ç›´æ¥è·³è½¬è‡³ GitHub Logsã€‚



## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. é…ç½® Secrets

åœ¨ GitHub ä»“åº“çš„ `Settings` -> `Secrets and variables` -> `Actions` ä¸­æ·»åŠ ï¼š

* `ALIYUN_REGISTRY`: é˜¿é‡Œäº‘ä»“åº“åœ°å€ (å¦‚ `registry.cn-hangzhou.aliyuncs.com`)
* `ALIYUN_NAME_SPACE`: å‘½åç©ºé—´
* `ALIYUN_REGISTRY_USER`: é˜¿é‡Œäº‘é•œåƒæœåŠ¡ç”¨æˆ·å
* `ALIYUN_REGISTRY_PASSWORD`: é˜¿é‡Œäº‘é•œåƒæœåŠ¡è®¿é—®ä»¤ç‰Œ (ä¸´æ—¶å¯†ç )
* `WEBHOOK_URL`: (å¯é€‰) é£ä¹¦/ä¼å¾®æœºå™¨äºº Webhook åœ°å€

### 2. ç¼–è¾‘é•œåƒåˆ—è¡¨

ä¿®æ”¹ `images.txt` æ–‡ä»¶ï¼Œæ¯è¡Œå¡«å…¥ä¸€ä¸ªé•œåƒåœ°å€ï¼š

```text
# å®˜æ–¹é•œåƒä¼šè‡ªåŠ¨è½¬ä¸º library_mysql:8.0
mysql:8.0
# è‡ªåŠ¨è½¬ä¸º apache_doris:fe-2.1.11
apache/doris:fe-2.1.11

```

### 3. æ‰§è¡ŒåŒæ­¥

* **è‡ªåŠ¨è§¦å‘**ï¼šä¿®æ”¹å¹¶æäº¤ `images.txt` åï¼Œå·¥ä½œæµä¼šè‡ªåŠ¨è¿è¡Œã€‚
* **æ‰‹åŠ¨è§¦å‘**ï¼šåœ¨ `Actions` é¡µé¢æ‰‹åŠ¨ç‚¹å‡» `Run workflow`ã€‚

## ğŸ“ å‘½åè½¬æ¢è§„åˆ™å‚è€ƒ

| æºé•œåƒ (Docker Hub) | é˜¿é‡Œäº‘ä»“åº“å (ACR) |
| --- | --- |
| `mysql:latest` | `library_mysql:latest` |
| `apache/doris:2.1` | `apache_doris:2.1` |
| `bitnami/git:latest` | `bitnami_git:latest` |

## ğŸ”” é€šçŸ¥é¢„è§ˆ

é…ç½® `WEBHOOK_URL` åï¼Œä½ å°†æ”¶åˆ°å¦‚ä¸‹æ ¼å¼çš„ç²¾ç®€é€šçŸ¥ï¼š

> ## **Dockeré•œåƒåŒæ­¥ï¼šæˆåŠŸ**
> 
> 
> âœ… æœ¬æ¬¡æ–°å¢åŒæ­¥é•œåƒï¼š2 ä¸ª
> âœ¨ library_mysql:8.0
> âœ¨ apache_doris:fe-2.1.11
> ![20260127122221_594_32](https://github.com/user-attachments/assets/36e35447-31a4-4e3e-85d4-ca9005d32424)

